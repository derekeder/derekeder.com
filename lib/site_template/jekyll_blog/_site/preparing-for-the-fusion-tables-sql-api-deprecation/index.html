<h2>
  <small>12 Jan 2013<br /></small>
  Preparing for the Google Fusion Tables SQL API Deprecation
</h2>
<div class='blog'>
  <p><a href='https://developers.google.com/fusiontables/'><img class='img-polaroid' src='http://derekeder.com/images/blog/fusion-tables-logo-beta.gif' title='Google Fusion Tables' alt='Google Fusion Tables'></a></p>

<p>On January 14, 2013, Google will <a href="https://developers.google.com/fusiontables/docs/developers_guide">deprecate the SQL API</a> for their <a href="https://developers.google.com/fusiontables/">Fusion Tables platform</a>. This post is here to help developers prepare for it (or more likely, fix things after they break).</p>

<h3>How to upgrade to the Fusion Tables v1 API</h3>

<p>According to <a href="https://developers.google.com/fusiontables/docs/v1/migration_guide">Google's Migration Guide</a> (very useful!), their recommended path is to upgrade your apps to the <a href="https://developers.google.com/fusiontables/docs/v1/getting_started">Fusion Tables v1 API</a>.</p>

<p>I've already upgraded the <a href="http://derekeder.com/searchable_map_template/">Searchable Map Template</a>, <a href="https://github.com/open-city/look-at-cook">Look at Cook</a>, and forked the <a href="https://github.com/derekeder/fusiontips">fusiontips library</a> (as well as <a href="http://code.google.com/p/gmaps-utility-gis/issues/detail?id=12">submitted a patch</a> to the original) if you are interested in seeing examples of how it's done.</p>

<p>Other than changing the endpoint you are querying, there are a few hurdles to upgrading to the v1 API:</p>

<ul>
<li>First, you need to get an <a href="https://code.google.com/apis/console/">API key</a>.</li>
<li>Second, the format of the returned data is <a href="https://developers.google.com/fusiontables/docs/v1/using#queryData">slightly different</a>, so you will need to change how you process it. <a href="https://github.com/derekeder/FusionTable-Map-Template-Heroku/commit/7e86b0bfba411584e0a305560d07444648835a0c">This diff</a> gives a good example of that change.</li>
</ul>


<h3>Oops, there are no shortcuts</h3>

<p>Earlier, I thought I had a pretty good shortcut around upgrading. I thought that I could just swap out 'google.com/fusiontables/api/query' for 'fusiontables.googleusercontent.com/fusiontables/api/query' and everything would still work.</p>

<p>Well, after doing some digging and finding <a href="https://groups.google.com/forum/?fromgroups=#!topic/fusion-tables-users-group/JlxS6ckszf4">this post</a>, I was pretty sure that wouldn't work.</p>

<p>So, yah, there are some libraries to update now.</p>

<h3>fusion_tables gem, I'm here to save you!</h3>

<p>The <a href="https://github.com/tokumine/fusion_tables">fusion_tables</a> Ruby gem by <a href="https://twitter.com/tokumin">Simon Tokumine</a> is one of the more awesome things that has been built on top of Fusion Tables. It acts as a lightweight wrapper to create, update and delete your Fusion Tables. Plus, it formats everything as hashes and arrays for easy data manipulation. It's pretty much the go-to Ruby library for interfacing with Fusion Tables.</p>

<p>Unfortunately, it still uses the old SQL API, so unless it is updated, all applications using it will break after Monday January 14, 2013.</p>

<p>Good news! I submitted a <a href="https://github.com/tokumine/fusion_tables/pull/21">pull request</a> with a patch to have it work with the v1 API. Hopefully it will get merged in soon, but in case it doesn't and you're scrambling, you can point to my repo directly.</p>

<p>Update your Gemfile:</p>

<div class="highlight"><pre><code class="bash">gem <span class="s1">&#39;fusion_tables&#39;</span>, :git  <span class="o">=</span>&gt; <span class="s1">&#39;git://github.com/derekeder/fusion_tables.git&#39;</span>
</code></pre>
</div>


<p>and run:</p>

<div class="highlight"><pre><code class="bash">bundle update
</code></pre>
</div>


<p>From there, you can deploy to your server, and you should be good to go.</p>

<p>Note that pointing to a Github repo is not a permenant solution. You should plan on changing it back to the regular gem once it's updated.</p>

<p>I'll continue to update this post as things develop. There's a <a href="http://code.google.com/p/fusion-tables-client-php/">PHP client library</a> that may need saving as well.</p>

</div>

<hr />
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style " addthis:title="Preparing for the Google Fusion Tables SQL API Deprecation" addthis:url="http://derekeder.com/blog/preparing-for-the-fusion-tables-sql-api-deprecation">
<a class="addthis_button_tweet"></a>
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=xa-508f02450809cc4d"></script>
<!-- AddThis Button END -->

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'derekeder'; // required: replace example with your forum shortname
  var disqus_identifier = '/preparing-for-the-fusion-tables-sql-api-deprecation';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
<hr />

<p><a href='/'>&laquo; back to blog</a></p>