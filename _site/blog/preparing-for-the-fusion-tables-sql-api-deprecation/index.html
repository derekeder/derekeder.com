<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <meta content='Partner at DataMade, Co-found of Open City, and leader of the Chi Hack Night. I make stuff with open data.' name='description'>
    <meta content='Derek Eder' name='author'>

    <title>
      
        Preparing for the Google Fusion Tables SQL API Deprecation - Derek Eder
      
    </title>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    
      <meta content="Partner at DataMade, Co-found of Open City, and leader of the Chi Hack Night. I make stuff with open data." name='description' />
    
    <meta content='Derek Eder' name='author' />

    <!-- Facebook metadata -->
    <meta content="" property="og:site_name">
    
      <meta content="Preparing for the Google Fusion Tables SQL API Deprecation" property="og:title">
    
    
      <meta content="article" property="og:type">
    
    
      <meta content="Partner at DataMade, Co-found of Open City, and leader of the Chi Hack Night. I make stuff with open data." property="og:description">
    
    
      <meta content="http://derekeder.com/blog/preparing-for-the-fusion-tables-sql-api-deprecation" property="og:url">
    
    
      <meta content="2013-01-12T00:00:00-06:00" property="article:published_time">
      <meta content="http://derekeder.com/about-us/" property="article:author">
    
    
      <meta content="http://derekeder.com/images/datamade_logomark_full.png" property="og:image">
    
    
      
      <meta content="blog" property="article:section">
      
    
    
      
    

    <!-- Twitter metadata -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@DataMadeCo">
    <meta name="twitter:creator" content="@DataMadeCo">
    
      <meta name="twitter:title" content="Preparing for the Google Fusion Tables SQL API Deprecation">
    
    
      <meta name="twitter:url" content="http://derekeder.com/blog/preparing-for-the-fusion-tables-sql-api-deprecation">
    
    
      <meta name="twitter:description" content="Partner at DataMade, Co-found of Open City, and leader of the Chi Hack Night. I make stuff with open data.">
    
    
      <meta name="twitter:image:src" content="http://derekeder.com/images/datamade_logomark_full.png">
    

    <link href='/favicon.ico' rel='shortcut icon'>
    <!-- Styles -->
    <link rel="stylesheet" href="/css/bootstrap.spacelab.min.css"/>
    <link rel="stylesheet" href="/css/bootstrap-responsive.css"/>
    <link rel="stylesheet" href="/css/custom.css"/>
    <link rel="stylesheet" href="/css/code_highlighting.css"/>
    
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class='container'>
      <div class='row'>
        <div class='span3 content-secondary'>
          <h2>
            <a href='/'>Derek Eder</a>
          </h2>
          <h4>Open Data Web Developer</h4>
          <div class='hidden-phone'>
            <img alt='Derek Eder' class='pull-left img-polaroid headshot' src='/images/derek.jpg' title='Derek Eder'>
            <p>
              I work with open data and create open source apps and tools in Chicago. <a href='/about'>Read more &raquo;</a>
            </p>
            <hr>
            <div class='clearfix'></div>
            <p>
              <strong>
                Founder and Partner at
                <a href='http://datamade.us'>DataMade</a>
              </strong>
              <br>
              An open data web development and consulting company in Chicago
            </p>
            <p>
              <strong>
                Lead Organizer of
                <a href='http://chihacknight.org'>Chi Hack Night</a>
              </strong>
              <br>
              Weekly event for building civic technology with open data
            </p>
            <p>
              <strong>
                Co-founder of
                <a href='http://opencityapps.org/'>Open City</a>
              </strong>
              <br>
              Group of volunteers that create civic web apps with open data
            </p>
            <p>
              <a href='mailto:derek.eder+de@gmail.com'>Email</a>
              or
              <a href='http://twitter.com/derekeder'>tweet</a>
              at me.
            </p>
            <p class='social'>
              <a href='https://github.com/derekeder'>
                <img alt='Derek Eder on Github' src='/images/social/github.png' title='Derek Eder on Github'>
              </a>
              <a href='https://twitter.com/derekeder'>
                <img alt='Derek Eder on Twitter' src='/images/social/twitter.png' title='Derek Eder on Twitter'>
              </a>
              <a href='http://www.linkedin.com/in/derekeder'>
                <img alt='Derek Eder on LinkedIn' src='/images/social/linkedin.png' title='Derek Eder on LinkedIn'>
              </a>
            </p>
          </div>
          <div class='clearfix'></div>
        </div>
        <div class='span9'>
          <div class='well content-primary'>
            <ul class='nav nav-pills'>
              
                
                

                <li class="">
                  <a href="/index.html">Home</a>
                </li>
              
                
                

                <li class="">
                  <a href="/talks/index.html">Talks</a>
                </li>
              
                
                

                <li class="">
                  <a href="/maps/index.html">Maps</a>
                </li>
              
                
                

                <li class="">
                  <a href="/projects/index.html">Projects</a>
                </li>
              
                
                

                <li class="">
                  <a href="/blog/index.html">Blog</a>
                </li>
              
                
                

                <li class="">
                  <a href="/about/index.html">About</a>
                </li>
              
            </ul>
            
            <hr />
            <div class='content-grid home'>
              
              <h2>
  <small>12 Jan 2013<br /></small>
  Preparing for the Google Fusion Tables SQL API Deprecation
</h2>
<div class='blog'>
  <h3 id="how-to-upgrade-to-the-fusion-tables-v1-api">How to upgrade to the Fusion Tables v1 API</h3>

<p>According to <a href="https://developers.google.com/fusiontables/docs/v1/migration_guide">Google’s Migration Guide</a> (very useful!), their recommended path is to upgrade your apps to the <a href="https://developers.google.com/fusiontables/docs/v1/getting_started">Fusion Tables v1 API</a>. </p>

<p>I’ve already upgraded the <a href="http://derekeder.com/searchable_map_template/">Searchable Map Template</a>, <a href="https://github.com/open-city/look-at-cook">Look at Cook</a>, and forked the <a href="https://github.com/derekeder/fusiontips">fusiontips library</a> (as well as <a href="http://code.google.com/p/gmaps-utility-gis/issues/detail?id=12">submitted a patch</a> to the original) if you are interested in seeing examples of how it’s done. </p>

<p>Other than changing the endpoint you are querying, there are a few hurdles to upgrading to the v1 API:</p>

<ul>
  <li>First, you need to get an <a href="https://code.google.com/apis/console/">API key</a>. </li>
  <li>Second, the format of the returned data is <a href="https://developers.google.com/fusiontables/docs/v1/using#queryData">slightly different</a>, so you will need to change how you process it. <a href="https://github.com/derekeder/FusionTable-Map-Template-Heroku/commit/7e86b0bfba411584e0a305560d07444648835a0c">This diff</a> gives a good example of that change.</li>
</ul>

<h3 id="oops-there-are-no-shortcuts">Oops, there are no shortcuts</h3>

<p>Earlier, I thought I had a pretty good shortcut around upgrading. I thought that I could just swap out ‘google.com/fusiontables/api/query’ for ‘fusiontables.googleusercontent.com/fusiontables/api/query’ and everything would still work.</p>

<p>Well, after doing some digging and finding <a href="https://groups.google.com/forum/?fromgroups=#!topic/fusion-tables-users-group/JlxS6ckszf4">this post</a>, I was pretty sure that wouldn’t work. </p>

<p>So, yah, there are some libraries to update now.</p>

<h3 id="fusiontables-gem-im-here-to-save-you">fusion_tables gem, I’m here to save you!</h3>

<p>The <a href="https://github.com/tokumine/fusion_tables">fusion_tables</a> Ruby gem by <a href="https://twitter.com/tokumin">Simon Tokumine</a> is one of the more awesome things that has been built on top of Fusion Tables. It acts as a lightweight wrapper to create, update and delete your Fusion Tables. Plus, it formats everything as hashes and arrays for easy data manipulation. It’s pretty much the go-to Ruby library for interfacing with Fusion Tables.</p>

<p>Unfortunately, it still uses the old SQL API, so unless it is updated, all applications using it will break after Monday January 14, 2013. </p>

<p>Good news! I submitted a <a href="https://github.com/tokumine/fusion_tables/pull/21">pull request</a> with a patch to have it work with the v1 API. Hopefully it will get merged in soon, but in case it doesn’t and you’re scrambling, you can point to my repo directly.</p>

<p>Update your Gemfile:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">gem <span class="s1">&#39;fusion_tables&#39;</span>, :git  <span class="o">=</span>&gt; <span class="s1">&#39;git://github.com/derekeder/fusion_tables.git&#39;</span></code></pre></div>

<p>and run:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">bundle update</code></pre></div>

<p>From there, you can deploy to your server, and you should be good to go. </p>

<p>Note that pointing to a Github repo is not a permenant solution. You should plan on changing it back to the regular gem once it’s updated.</p>

<p>I’ll continue to update this post as things develop. There’s a <a href="http://code.google.com/p/fusion-tables-client-php/">PHP client library</a> that may need saving as well.</p>

</div>

<hr />
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style " addthis:title="Preparing for the Google Fusion Tables SQL API Deprecation" addthis:url="http://derekeder.com/blog/blog/preparing-for-the-fusion-tables-sql-api-deprecation">
<a class="addthis_button_tweet"></a>
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=xa-508f02450809cc4d"></script>
<!-- AddThis Button END -->

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'derekeder'; // required: replace example with your forum shortname
  var disqus_identifier = '/blog/preparing-for-the-fusion-tables-sql-api-deprecation';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
<hr />

<p><a href='/'>&laquo; back to blog</a></p>

            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class='footer'>
      <div class='span12'>
        <p class='pull-right'>
          <a href='https://twitter.com/derekeder'>@derekeder</a>
          |
          <a href='mailto:derek.eder+de@gmail.com'>Email me</a>
          |
          &copy; Derek Eder
        </p>
      </div>
    </footer>
    <script type="text/javascript" src="/javascripts/jquery.js"></script>
    <script type="text/javascript" src="/javascripts/bootstrap.js"></script>
    
    <script type="text/javascript" src="/javascripts/analytics_lib.js"></script>
  </body>
</html>
